mixed-port: 7890
mode: rule
log-level: debug

tun:
  enable: true
  stack: system
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  device: utun0
  mtu: 9000
  strict-route: true

dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: redir-host
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fallback:
    - https://1.1.1.1/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
  use-hosts: true

hosts:
  doh.pub: [
    '120.53.53.53',
    '1.12.12.21'
  ]
  dns.alidns.com: [
    '223.5.5.5',
    '223.6.6.6'
  ]

proxies:
- name: "anytls-out"
  type: anytls
  server: example.com # 服务端地址（你的域名）
  port: 8443 # 节点端口
  password: "aHR0cHM6Ly9ibG9nLjUyMDEzMTIwLnh5ei8=" # 协议认证密码
  udp: true
  tls: true
  servername: example.com # 你的域名

# 备用SSH协议
- name: "ssh-out"
  type: ssh
  server: 127.0.0.1
  port: 22
  username: root
  password: password

# 备用SS协议
- name: "ss-out"
  type: ss
  server: 127.0.0.1
  port: 9527
  cipher: aes-128-gcm
  password: "password"
  udp: true

rules:
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.17.0.1/16,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,anytls-out
  
